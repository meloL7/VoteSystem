<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.elvis.vote.dao.Admin.UserDao">
    <!--所有学院-->
    <select id="searchColleages" resultType="com.elvis.vote.pojo.Colleage">
        select colleage_id,colleage_name
        from colleage
    </select>

    <!--所有专业-->
    <select id="searchMajors" resultType="com.elvis.vote.pojo.Major">
        select major_id,major_name
        from colleage
        LEFT JOIN major
        on colleage.colleage_id = major.colleage_id
        where colleage_name=#{colleageName}
    </select>


    <sql id="selectPrefix">
        id,sno,pwd,email,sname,identify,sex,age,colleage,major,grade,classes,remark,del_flag
    </sql>

    <select id="selectAllUsers" parameterType="java.lang.Integer" resultType="com.elvis.vote.pojo.User">
        select
        <include refid="selectPrefix"></include>
        from user where identify = #{identify}
    </select>


    <select id="searchTeacher" resultType="com.elvis.vote.pojo.User">
        select
        <include refid="selectPrefix"></include>
        from user where identify = 1
        <if test="sno != null || sno != ''">
            and sno = #{sno}
        </if>
        <if test="sname != null">
            and sname like concat('%',#(sname),'%')

        </if>
    </select>




</mapper>